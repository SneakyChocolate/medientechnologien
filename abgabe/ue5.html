<!DOCTYPE html>
<html lang="de">

<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="format.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="tables.css">
    </style>
</head>

<body>

    <iframe src="oben.html" width="800" height="120" name="IFrame3" id="IFrame3" scrolling="no" frameborder="0"
        title="error">
        <p>Ihr Browser kann leider keine eingebe5tteten Frames anzeigen:Sie k&ouml;nnen die eingebettete Seite
            &uuml;ber den
            folgenden.</p>
    </iframe>

    <h2>Übung 5</h2>
    <h3>Aufgabe 1</h3>
    <h2>a)</h2>
    <div class="gallery">
        <div class="gallery-item">
            <p>Original: </p>
            <audio controls>
                <source src="./ue5-audios/Musik_Gruppe4.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>3 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_3.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>6 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_6.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>9 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_9.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>12 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_12.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>20 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_20.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>50 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_50.wav" type="audio/wav">
            </audio>
        </div>
        <div class="gallery-item">
            <p>-20 dB: </p>
            <audio controls>
                <source src="./ue5-outputs/Musik_Gruppe4_amplificate_-20.wav" type="audio/wav">
            </audio>
        </div>
    </div>
    <br>
    <img src="./ue5-outputs/Musik_amplified_20_clippingpng.png" alt="" style="min-width: 600px;">

    <!-- #region amplificate() code -->
    <pre>    private static void amplificate(int db) {
        double a = Math.pow(10.0, (double) db / 20.0);
        System.out.println("a: " + a);
        for (int i = 0; i < samples; i++) {
            float f_sound = readWavFile.sound[i];
            f_sound *= a;
            if (f_sound > Short.MAX_VALUE) {
                f_sound = Short.MAX_VALUE;
            } else if (f_sound Short.MIN_VALUE) {
                f_sound = Short.MIN_VALUE;
            }
            readWavFile.sound[i] = (short) f_sound;
        }
    }</pre>
    <!-- #endregion -->
    <h2>b)</h2>
    <p>Eine Verzerrung ist bis 12 noch nicht wahrnehmbar, aber ab spätestens 20dB ist diese wahrnehmbar.</p>
    <h2>c)</h2>
    <p>3 dB: </p>
    <audio controls>
        <source src="./ue5-outputs/sine_1k_08_amplificate_3.wav" type="audio/wav">
    </audio>
    <p>6 dB: </p>
    <audio controls>
        <source src="./ue5-outputs/sine_1k_08_amplificate_6.wav" type="audio/wav">
    </audio>
    <p>9 dB: </p>
    <audio controls>
        <source src="./ue5-outputs/sine_1k_08_amplificate_9.wav" type="audio/wav">
    </audio>
    <p>12 dB: </p>
    <audio controls>
        <source src="./ue5-outputs/sine_1k_08_amplificate_12.wav" type="audio/wav">
    </audio>
    <br>
    <div class="gallery">
        <div class="gallery-item">
            <p>Sinus verstärkt um 3 dB:</p>
            <img src="ue5-outputs/sine_amplificate_3.png" alt="">
        </div>
        <div class="gallery-item">
            <p>Sinus verstärkt um 6 dB:</p>
            <img src="ue5-outputs/sine_amplificate_6.png" alt="">
        </div>
        <div class="gallery-item">
            <p>Sinus verstärkt um 9 dB:</p>
            <img src="ue5-outputs/sine_amplificate_9.png" alt="">
        </div>
        <div class="gallery-item">
            <p>Sinus verstärkt um 12 dB:</p>
            <img src="ue5-outputs/sine_amplificate_12_1.png" alt="">
        </div>
        <div class="gallery-item">
            <p>Sinus verstärkt um 12 dB:</p>
            <img src="ue5-outputs/sine_amplificate_12_2.png" alt="">
        </div>
        <div class="gallery-item">
            <p>Sinus verstärkt um 12 dB:</p>
            <img src="ue5-outputs/sine_amplificate_12_3.png" alt="">
        </div>
    </div>

    <!-- #region table -->
    <table>
        <tr class="header-row">
            <td>Verstärung in dB</td>
            <td>Frequenz</td>
            <td>Amplitude</td>
            <td>Summe der Potenzen ab Index 1</td>
            <td>Summe der Potenzen ab Index 2</td>
            <td>Wurzel der Division</td>
        </tr>
        <tr>
            <td>3</td>
            <td>1000</td>
            <td>84.3</td>
            <td>7106.49</td>
            <td>0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>6</td>
            <td>1000</td>
            <td>87.3</td>
            <td>7621.29</td>
            <td>0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>9</td>
            <td>1000</td>
            <td>90.3</td>
            <td>8154.09</td>
            <td>0</td>
            <td>0</td>
        </tr>
        <tr>
            <td>12</td>
            <td>1000</td>
            <td>92</td>
            <td>17369</td>
            <td>8905</td>
            <td>0.716027256</td>
        </tr>
        <tr>
            <td></td>
            <td>2950</td>
            <td>72</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td>4983</td>
            <td>61</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <!-- #endregion -->

    <p>Damit sehen wir, dass es nur für den Sinus, welcher um 12 dB verstärkt wird, einen Klirrfaktor gibt, welcher
        0.716 beträgt.</p>

    <h3>Aufgabe 2</h3>
    <!-- #region 2 a) -->
    <h2>a)</h2>
    <p><b>N = Δt * fa </b><br>
        10ms: N = 0.01s * 44100 = 441 <br>
        100ms: N = 0.1s * 44100 = 4410 <br>
        200ms: N = 0.2s * 44100 = 8820 <br>
        Wenn man 2 Kanäle hat, dann müsste N = 2N sein.</p>

    <p>Funktion zur Echo Generierung:</p>
    <!-- #endregion -->

    <!-- #region echo code -->
    <pre>
        private static void echo(int ms, double factor) {
            int indicies = (int) (((double) ms / 1000.0) * sampleRate * numChannels);
            System.out.println("indicies: " + indicies);
            numFrames += indicies / numChannels;
            int new_samples = samples + indicies;
            short[] echo_sound = new short[new_samples];
            for (int i = 0; i < new_samples; i++) {
                // ********* Done ***************
                double add = 0;
                if (i < indicies && i < samples) {
                    add = readWavFile.sound[i];
                }
                else if (i < samples) {
                    add = readWavFile.sound[i] + readWavFile.sound[i - indicies] * factor;
                }
                else if (i >= indicies) {
                    add = readWavFile.sound[i - indicies] * factor;
                }
                
                if (add > Short.MAX_VALUE) {
                    add = Short.MAX_VALUE;
                } else if (add < Short.MIN_VALUE) {
                    add = Short.MIN_VALUE;
                }
                echo_sound[i] = (short) (add / (1 + factor));
            }
            readWavFile.sound = echo_sound;
        }
    </pre>
    <!-- #endregion -->

    <!-- #region 2 b) -->
    <h2>b)</h2>
    <p>Original von Musik:</p>
    <audio controls>
        <source src="./ue5-audios/Musik_Gruppe4.wav" type="audio/wav">
    </audio>
    <p>10 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Musik_Gruppe4_echo_10.wav" type="audio/wav">
    </audio>
    <p>100 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Musik_Gruppe4_echo_100.wav" type="audio/wav">
    </audio>
    <p>200 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Musik_Gruppe4_echo_200.wav" type="audio/wav">
    </audio>

    <p>Original von Sprache:</p>
    <audio controls>
        <source src="./ue5-audios/Sprache_Gruppe4.wav" type="audio/wav">
    </audio>
    <p>10 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Sprache_Gruppe4_echo_10.wav" type="audio/wav">
    </audio>
    <p>100 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Sprache_Gruppe4_echo_100.wav" type="audio/wav">
    </audio>
    <p>200 ms:</p>
    <audio controls>
        <source src="./ue5-outputs/Sprache_Gruppe4_echo_200.wav" type="audio/wav">
    </audio>
    <!-- #endregion -->

    <h3>Aufgabe 3</h3>
    <h2>a)</h2>

    <!-- #region filter code -->
    <pre>
        private static void filter_n() {
            for (int i = samples - 1; i >= 0; i--) {
                double f_sound = 0;
                if (i > 0) {
                    f_sound = readWavFile.sound[i] * 0.5 - readWavFile.sound[i-1] * 0.45;
                }
                readWavFile.sound[i] = (short) f_sound;
            }
        }

        private static void filter_p() {
            for (int i = samples - 1; i >= 0; i--) {
                double f_sound = 0;
                if (i > 0) {
                    f_sound = readWavFile.sound[i] * 0.5 + readWavFile.sound[i-1] * 0.45;
                }
                readWavFile.sound[i] = (short) f_sound;
            }
        }
    </pre>
    <!-- #endregion -->

    <p>Original Musik:</p>
    <audio controls>
        <source src="./ue5-audios/Musik_Gruppe4.wav" type="audio/wav">
    </audio>
    <p>Hochpass Musik:</p>
    <audio controls>
        <source src="./ue5-outputs/Musik_Gruppe4_filter_n.wav" type="audio/wav">
    </audio>
    <p>Tiefpass Musik:</p>
    <audio controls>
        <source src="./ue5-outputs/Musik_Gruppe4_filter_p.wav" type="audio/wav">
    </audio>
    <br>

    <h2>b)</h2>

    <p>Original White Noise:</p>
    <audio controls>
        <source src="./ue5-audios/Noise_08.wav" type="audio/wav">
    </audio>
    <img src="./ue5-outputs/noise_original.png" alt="">
    <img src="./ue5-outputs/noise_original_spectrum.png" alt="">
    <br>
    <p>Hochpass White Noise:</p>
    <audio controls>
        <source src="./ue5-outputs/Noise_08_filter_n.wav" type="audio/wav">
    </audio>
    <img src="./ue5-outputs/noise_filter_n.png" alt="">
    <img src="./ue5-outputs/noise_filter_n_spectrum.png" alt="">
    <br>
    <p>Tiefpass White Noise:</p>
    <audio controls>
        <source src="./ue5-outputs/Noise_08_filter_p.wav" type="audio/wav">
    </audio>
    <img src="./ue5-outputs/noise_filter_p.png" alt="">
    <img src="./ue5-outputs/noise_filter_p_spectrum.png" alt="">
    <br>
</body>

</html>